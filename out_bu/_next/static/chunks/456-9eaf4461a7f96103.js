"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[456],{456:function(t,e,n){function r(t,e,n){if(t<=0||e<0||n<=0)throw Error("Invalid loan parameters");let r=e/12,a=12*n;return 0===r?t/a:t*r*Math.pow(1+r,a)/(Math.pow(1+r,a)-1)}function a(t,e,n,r){let a=t/e,o=e*Math.pow(1+n,r/12);return{bitcoinValue:a*o,bitcoinPrice:o,bitcoinAmount:a}}function o(t,e,n){let r=e/12,a=12*n;return 0===r?t/a:r*Math.pow(1+r,a)*t/(Math.pow(1+r,a)-1)}function l(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:360,n=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:360,{property:n,refinanceScenario:r,bitcoinInvestment:a,propertyIncome:l,payoffTrigger:i}=t,u=function(t){let e,n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:360,l=[],{property:i,currentMortgage:u,refinanceScenario:c,propertyIncome:m}=t;"cash-out-refinance"===c.type?(e=c.newLoanAmount,n=c.newInterestRate,r=c.newLoanTermYears):(e=u.currentBalance,n=c.interestRate,r=c.newLoanTermYears||10);let s=o(e,n,r),h=new Date(2024,3,1);for(let t=1;t<=a;t++){var f,p;let a=new Date(h);a.setMonth(h.getMonth()+t-1);let u=a.toISOString().split("T")[0],c="".concat(a.getFullYear(),"-").concat(String(a.getMonth()+1).padStart(2,"0")),y=function(t,e,n,r){let a=e/12,l=12*n-(r-1);if(l<=0)return 0;let i=o(t,e,n);return 0===a?t-i*(r-1):Math.max(0,i*(1-Math.pow(1+a,-l))/a)}(e,n,r,t);if(y<=.01)break;let d=(f=i.currentValue)*Math.pow(1.0025,t)-f,g=i.currentValue-y+d,b=m.monthlyRentalIncome-(m.monthlyTaxes+m.monthlyInsurance+m.monthlyHOA+s),v={month:t,date:u,yearMonth:c,debtBalance:y,baseEquity:g,propertyAppreciation:d,monthlyPayment:s,netCashFlow:b,canPayOff:!1,payoffAmount:y,surplus:0};l.push(v)}return l}(t,e),c=function(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:360,{bitcoinInvestment:r}=t,{performanceSettings:a}=r,o=r.currentBitcoinPrice,l=a.maxDrawdownPercent||70;a.model,e=(a.customAnnualGrowthRate||25)/100;let i=[];for(let t=1;t<=n;t++)if("seasonal"===a.model&&a.useSeasonalFactors){let n=function(t,e){let n,r,a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:70;arguments.length>3&&void 0!==arguments[3]&&arguments[3];let l=(t-1)%48,i=Math.pow(1+e,1/12)-1;if(l<12){r="accumulation";let t=.5+.5*Math.pow(l/12,.5);n=i*t,a=t}else if(l<24){r="early_bull";let t=1+1*Math.pow((l-12)/12,.8);n=i*t,a=t}else if(l<36){r="peak_bull";let t=2+1*Math.sin((l-24)/12*Math.PI);n=i*t,a=t}else{r="bear";let t=(l-36)/12,e=o/100;if(t<.6){let r=1-e*Math.pow(t/.6,1.5);n=i*Math.max(r,.1),a=Math.max(r,.1)}else{let r=1-e+e*Math.pow((t-.6)/.4,.7);n=i*r,a=r}}return{monthlyPerformanceRate:n,seasonalFactor:a,cyclePhase:r,cycleOffset:l,spotPrice:0}}(t,e,l);i.push(n)}else{let t=Math.pow(1+e,1/12)-1;i.push({monthlyPerformanceRate:t,seasonalFactor:1,cyclePhase:"steady",cycleOffset:0,spotPrice:0})}let u=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:360,r=[t];for(let t=0;t<Math.min(e.length,n-1);t++){let n=r[r.length-1],a=Math.max(n*(1+e[t].monthlyPerformanceRate),.8*n);r.push(a)}return r}(o,i,n);return i.forEach((t,e)=>{t.spotPrice=u[e+1]||u[u.length-1]}),i}(t,e),m=a.investmentAmount/a.currentBitcoinPrice,s=[];for(let t=0;t<u.length&&t<c.length;t++){let e=u[t],r=c[t],a=r.spotPrice,o=m*a,h=function(t,e,n){if(t<=0||e<=0)return{btcToSell:0,dollarAmount:0,remainingBTC:n};let r=Math.min(t/e,n);return{btcToSell:r,dollarAmount:r*e,remainingBTC:n-r}}(Math.max(0,e.monthlyPayment+l.monthlyTaxes+l.monthlyInsurance+l.monthlyHOA-l.monthlyRentalIncome),a,m);m=h.remainingBTC,h.btcToSell;let f=n.currentValue+e.propertyAppreciation+o,p=function(t,e,n){switch(n.type){case"percentage":return t/e*100>=n.value;case"retained_amount":return t-e>=n.value;default:return!1}}(o,e.debtBalance,i),y=o>=e.debtBalance,d=y?o-e.debtBalance:0,g={...e,btcHeld:m,btcValue:o,btcSpotPrice:a,btcPerformed:r.monthlyPerformanceRate,totalAsset:f,btcSoldMonthly:h.btcToSell,remainingBTC:m,payoffTriggerMet:p,canPayOff:y,surplus:d};if(s.push(g),p&&y)break}return s}(t,e),r=function(t,e){let n=Math.min(240,t.length),r=[];for(let a=0;a<n;a++){let n=t[a],o={month:n.month,date:n.date,debt:n.debtBalance,baseEquity:e.currentValue-n.debtBalance,appreciation:n.propertyAppreciation,btcValue:n.btcValue,totalValue:n.totalAsset};r.push(o)}return r}(n,t.property),a=function(t){let e=null,n=null,r=0,a=0,o=0,l=0;for(let i of t)if(i.payoffTriggerMet&&i.canPayOff){e=i.month,n=i.date,r=i.btcValue,a=i.debtBalance,l=i.btcValue-i.debtBalance;let t=360-i.month;o=.7*i.monthlyPayment*t;break}return{triggerMonth:e,triggerDate:n,btcValueAtTrigger:r,debtAtTrigger:a,interestSaved:o,finalBTCRetained:l}}(n),l=function(t,e){let n=t[t.length-1],r=e.bitcoinInvestment.investmentAmount,a=e.property.currentValue,o=n.totalAsset,l=a+n.propertyAppreciation,i=n.btcValue,u=(o-(a+r))/(a+r);return{finalTotalAsset:o,finalPropertyValue:l,finalBTCValue:i,totalROI:u,annualizedReturn:Math.pow(1+u,1/(n.month/12))-1}}(n,t);return{monthlySchedule:n,stackedChartData:r,payoffAnalysis:a,performanceSummary:l}}function i(t){let e=[];return(!t.property.currentValue||t.property.currentValue<=0)&&e.push("Property current value is required and must be positive"),(!t.bitcoinInvestment.investmentAmount||t.bitcoinInvestment.investmentAmount<=0)&&e.push("Bitcoin investment amount is required and must be positive"),(!t.bitcoinInvestment.currentBitcoinPrice||t.bitcoinInvestment.currentBitcoinPrice<=0)&&e.push("Current Bitcoin price is required and must be positive"),(!t.payoffTrigger.value||t.payoffTrigger.value<=0)&&e.push("Payoff trigger value is required and must be positive"),"percentage"===t.payoffTrigger.type&&t.payoffTrigger.value>1e3&&e.push("Payoff trigger percentage cannot exceed 1000%"),{isValid:0===e.length,errors:e}}n.d(e,{calculateBitcoinValueAtTime:function(){return a},calculateMonthlyPayment:function(){return r},formatCurrency:function(){return u},formatPercent:function(){return c},yj:function(){return l},sf:function(){return i}});let u=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t),c=t=>new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:1,maximumFractionDigits:2}).format(t)}}]);